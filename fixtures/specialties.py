import re
from typing import Tuple, List, Set

SPECIALTIES: Set[str] = set()

COMPILED_REGEXPS: List[Tuple[type(re.compile('')), str]] = []


def _generate_specialties() -> None:
    raw = (
        (r'\baba\b', "ABA"),
        (r'applied beha', "ABA"),
        (r'\badd\b', "ADD & ADHD"),
        (r'attention(-| )def', "ADD & ADHD"),
        (r'hyperactivity', "ADD & ADHD"),
        (r'\badhd\b', "ADD & ADHD"),
        (r'learning', "ADD & ADHD"),
        (r'addiction', "Addiction"),
        (r'substance', "Addiction"),
        (r'drug', "Addiction"),
        (r'\balcohol\b', "Addiction"),
        (r'suboxone', "Addiction"),
        (r'\bdetox\b', "Addiction"),
        (r'smoking', "Addiction"),
        (r'\banx', "Anxiety"),
        (r'control issues', "Anxiety"),
        (r'fear', "Anxiety"),
        (r'panic', "Anxiety"),
        (r'phobia', "Anxiety"),
        (r'\bworr', "Anxiety"),
        (r'shame', "Anxiety"),
        (r'autism', "Autism"),
        (r'\basperger', "Autism"),
        (r'^((?=.*cbt)|(?=.*cognitive beha)).*$', "CBT & DBT"),
        (r'cbt', "CBT & DBT"),
        (r'^((?=.*dbt)|(?=.*dialectic)).*$', "CBT & DBT"),
        (r'dbt', "CBT & DBT"),
        (r'mbct', "CBT & DBT"),
        (
            r'^(?!.*adult|.*parent|.*death|.*childhood)((?=.*adolescent)|('
            r'?=.*child)|(?=.*teen)).*$',
            "Child & Adolescent"),
        (r'developmental', "Child & Adolescent"),
        (r'^((?=.*hiv)|(?=.*aids)).*$', "Co-Morbidity"),
        (r'cancer', "Co-Morbidity"),
        (r'chronic', "Co-Morbidity"),
        (r'\bdisab', "Co-Morbidity"),
        (r'\bterminal', "Co-Morbidity"),
        (r'somati', "Co-Morbidity"),
        (r'^(?!.*self)(?=.*injury).*$', "Co-Morbidity"),
        (r'surgery', "Co-Morbidity"),
        (r'multiple scl', "Co-Morbidity"),
        (r'parkinson', "Co-Morbidity"),
        (r'oncology', "Co-Morbidity"),
        (r'attachment', "Codependency"),
        (r'caregiver', "Codependency"),
        (r'dependency', "Codependency"),
        (r'self(-| )harm', "Crisis"),
        (r'self(-| )injury', "Crisis"),
        (r'cutting', "Crisis"),
        (r'^(?!.*grief|.*bereavement)(?=.*suicid).*$', "Crisis"),
        (r'crisis inter', "Crisis"),
        (r'depress', "Depression"),
        (r'seasonal affective', "Depression"),
        (r'dissociat', "Dissociative"),
        # @TODO: This fails
        # (r'*\beap\b', "EAP"),
        (r'employee assist', "EAP"),
        (r'famil(y|i)', "Family Issues"),
        (r'adoption', "Family Issues"),
        (r'obesity', "Food & Eating Disorders"),
        (r'\beat', "Food & Eating Disorders"),
        (r'anorexia', "Food & Eating Disorders"),
        (r'bul(i|e)mia', "Food & Eating Disorders"),
        (r'^(?=.*body)((?=.*image)|(?=.*dysm)).*$', "Food & Eating Disorders"),
        (r'^psychiatry$', "General Practice"),
        (r'adults', "General Practice"),
        (r'social work', "General Practice"),
        # @TODO: This fails
        # (r'*\bnurs', "General Practice"),
        (r'^(?!.*supervision|.*issues)(?=.*clinical).*$', "General Practice"),
        (r'licensed professional', "General Practice"),
        (r'^\\s*psychiatry\\s*$', "General Practice"),
        (r'worker', "General Practice"),
        (r'elder', "Geriatric"),
        (r'geriatric', "Geriatric"),
        (r'^(?!.*parent)(?=.*\baging).*$', "Geriatric"),
        (r'grief', "Grief"),
        (r'bereavement', "Grief"),
        (r'^(?!provider.*)(?=.*group).*$', "Group Therapy"),
        (r'hypno', "Hypnotherapy"),
        (r'lgbt', "LGBTQ"),
        (r'^(?=.*identity)((?=.*gender)|(?=.*sex)).*$', "LGBTQ"),
        (
            r'^(?!.*parent)((?=.*bisex)|(?=.*homosex)|(?=.*gay)|(?=.*lesbian)|('
            r'?=.*transgender)|(?=.*queer)).*$',
            "LGBTQ"),
        (r'sexuality', "LGBTQ"),
        (r'gender', "LGBTQ"),
        (r'hocd', "LGBTQ"),
        (r'\bart.*', "Life & Career Counseling"),
        (r'impost(er|or)', "Life & Career Counseling"),
        (r'^(?!.*trauma)(?=.*stress).*$', "Life & Career Counseling"),
        (
            r'^(?=.*life)((?=.*balance)|(?=.*coach)|(?=.*quality)|(?=.*goal)|('
            r'?=.*transition)|(?=.*adjust)|(?=.*meaning)).*$',
            "Life & Career Counseling"),
        (r'executive', "Life & Career Counseling"),
        (r'career', "Life & Career Counseling"),
        (r'^(?!.*social|.*workshop|.*with)(?=.*\bwork).*$',
         "Life & Career Counseling"),
        (r'academic', "Life & Career Counseling"),
        (r'bull(ies|y)', "Life & Career Counseling"),
        (r'communication', "Life & Career Counseling"),
        (r'creativ', "Life & Career Counseling"),
        (r'^(?=.*emotional)((?=.*intelligence)|(?=.*overwhelm)|('
         r'?=.*equilibrium)).*$',
         "Life & Career Counseling"),
        (r'coach', "Life & Career Counseling"),
        (r'\bhabit', "Life & Career Counseling"),
        (r'inadequacy', "Life & Career Counseling"),
        (r'individuation', "Life & Career Counseling"),
        (r'midlife', "Life & Career Counseling"),
        (r'money', "Life & Career Counseling"),
        (r'financ', "Life & Career Counseling"),
        (r'\bpower\b', "Life & Career Counseling"),
        (r'discrimination', "Life & Career Counseling"),
        (r'^(?!.*harm|.*injury|.*cutting)(?=.*self).*$',
         "Life & Career Counseling"),
        (r'criticism', "Life & Career Counseling"),
        (r'worthless', "Life & Career Counseling"),
        (r'young adult ', "Life & Career Counseling"),
        (r'medication', "Medication Management"),
        (r'\bmen\b', "Men's Issues"),
        (r'erectile', "Men's Issues"),
        (r'\bmood\b', "Mood Disorders"),
        (r'bi(-|)polar', "Mood Disorders"),
        (r'^(?=.*group)(?=.*provider).*$', "Multi-Provider Group"),
        (r'\bneuro', "Neuropsychology"),
        (r'compulsive', "OCD"),
        (r'ocd', "OCD"),
        (r'hoarding', "OCD"),
        (r'trichotill', "OCD"),
        (r'perfectionism', "Personality Disorders"),
        (r'narcissism', "Personality Disorders"),
        (r'perosonality', "Personality Disorders"),
        (r'forensic', "Psychological Testing"),
        (r'^(?=.*psych)(?=.*testing).*$', "Psychological Testing"),
        (r'biofeed', "Psychological Testing"),
        (r'schizo', "Psychotic Disorders"),
        (r'paranoia', "Psychotic Disorders"),
        (r'psychosis', "Psychotic Disorders"),
        (r'psychotic', "Psychotic Disorders"),
        (r'delirium', "Psychotic Disorders"),
        (r'couple', "Relationship Issues"),
        (r'relationship', "Relationship Issues"),
        (r'marital', "Relationship Issues"),
        (r'marriage', "Relationship Issues"),
        (r'divorce', "Relationship Issues"),
        (r'breakup', "Relationship Issues"),
        (r'infidelity', "Relationship Issues"),
        (r'rejection', "Relationship Issues"),
        (r'trust', "Relationship Issues"),
        (r'open rela', "Relationship Issues"),
        (r'polyam', "Relationship Issues"),
        (r'clergy', "Religious Counseling"),
        (r'religio', "Religious Counseling"),
        (r'spiritual', "Religious Counseling"),
        (r'chrisitan', "Religious Counseling"),
        (r'\bjew', "Religious Counseling"),
        (r'islam', "Religious Counseling"),
        (r'muslim', "Religious Counseling"),
        (r'atheis', "Religious Counseling"),
        (r'couple.*sex|sex.*couple', "Sex & Intimacy"),
        (
            r'^(?!.*trauma|.*identity|.*bisex|.*sexuality|.*abuse|.*harassment'
            r'|.*victim|.*hetero|.*homosex|.*gender|.*lgbt|.*survivor).*sex.*$',
            "Sex & Intimacy"),
        (r'fertility', "Sex & Intimacy"),
        (r'erectile', "Sex & Intimacy"),
        (r'sleep', "Sleep Disorder"),
        (r'insomnia', "Sleep Disorder"),
        (r'trauma', "Trauma & Abuse"),
        (r'^(?!.*substance|.*alcohol|.*drug).*abuse.*$', "Trauma & Abuse"),
        (r'b\brape\b', "Trauma & Abuse"),
        (r'ptsd', "Trauma & Abuse"),
        (r'domestic violence', "Trauma & Abuse"),
        (r'assault', "Trauma & Abuse"),
        (r'pregnancy', "Women's Issues"),
        (r'partum', "Women's Issues"),
        (r'menstrual', "Women's Issues"),
        (r'birth', "Women's Issues"),
        (r'women', "Women's Issues"),
        (r'gynecol', "Women's Issues"),
        (r'obstetric', "Women's Issues"),
        (r'abortion', "Women's Issues"),
        (r'^(?=.*identity)((?=.*racial)|(?=.*cultural)).*$',
         "Multicultural Concerns"),
        (r'cultural', "Multicultural Concerns"),
        (r'immigra(tion|nt)', "Multicultural Concerns"),
        (r'\brace\b', "Multicultural Concerns"),
        (r'ethnic', "Multicultural Concerns"),
        (r'\banger', "Anger"),
        (r'^(?!.*domestic|.*political).*violence.*$', "Anger"),
        (r'aggression', "Anger"),
        (r'military', "Military & Veterans Issues"),
        (r'veteran', "Military & Veterans Issues"),
        (r'parent', "Parenting"),
    )

    for regex, category in raw:
        COMPILED_REGEXPS.append((re.compile(regex), category))
        SPECIALTIES.add(category)


_generate_specialties()
